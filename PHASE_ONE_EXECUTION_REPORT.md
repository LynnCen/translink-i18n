# é˜¶æ®µä¸€æ‰§è¡ŒæŠ¥å‘Šï¼šæ¶æ„è§£è€¦

> **æ‰§è¡Œæ—¶é—´**: 2026-01-03  
> **æ‰§è¡Œé˜¶æ®µ**: é˜¶æ®µä¸€ - æ¶æ„è§£è€¦ï¼ˆWeek 3-4ï¼‰  
> **çŠ¶æ€**: âœ… å·²å®Œæˆ

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

é˜¶æ®µä¸€çš„ä¸»è¦ç›®æ ‡æ˜¯è®©æ¯ä¸ªåŒ…å®Œå…¨ç‹¬ç«‹ï¼Œç§»é™¤åŒ…ä¹‹é—´çš„å¼ºä¾èµ–å…³ç³»ï¼Œä¸ºåç»­åŠŸèƒ½å®ç°å¥ å®šåŸºç¡€ã€‚

**æ‰§è¡Œç»“æœ**ï¼š
- âœ… æ‰€æœ‰ 3 ä¸ªå­ä»»åŠ¡ 100% å®Œæˆ
- âœ… CLI åŒ…å·²ç§»é™¤ Vika å¼ºä¾èµ–
- âœ… Vite Plugin å·²ç§»é™¤å¯¹ CLI çš„ä¾èµ–
- âœ… Runtime åŒ…å·²ç¡®è®¤å®Œå…¨ç‹¬ç«‹

---

## ğŸ“ è¯¦ç»†æ‰§è¡Œè®°å½•

### ä»»åŠ¡ 1.1ï¼šè§£è€¦ CLI åŒ… âœ…

#### é—®é¢˜æè¿°
CLI åŒ…å¼ºä¾èµ– Vika äº‘ç«¯æœåŠ¡ï¼Œå¯¼è‡´æ— æ³•ç‹¬ç«‹ä½¿ç”¨ã€‚push å’Œ pull å‘½ä»¤å®Œå…¨ä¾èµ– Vikaï¼Œä¸ç¬¦åˆ"æŒ‰éœ€ä½¿ç”¨"çš„è®¾è®¡åŸåˆ™ã€‚

#### æ‰§è¡Œæ­¥éª¤

1. **åˆ é™¤ Vika ç›¸å…³æ–‡ä»¶**
   - åˆ é™¤ `packages/cli/src/integrations/vika-client.ts`ï¼ˆVika å®¢æˆ·ç«¯å®ç°ï¼‰
   - åˆ é™¤ `packages/cli/src/commands/push.ts`ï¼ˆæ¨é€å‘½ä»¤ï¼‰
   - åˆ é™¤ `packages/cli/src/commands/pull.ts`ï¼ˆæ‹‰å–å‘½ä»¤ï¼‰

2. **æ›´æ–°ç±»å‹å®šä¹‰**
   - ä» `packages/cli/src/types/config.ts` ç§»é™¤ `vika` é…ç½®æ¥å£
   - ä¿ç•™å…¶ä»–é…ç½®æ¥å£ä¸å˜

3. **æ›´æ–°é…ç½®ç®¡ç†**
   - ä» `packages/cli/src/utils/config.ts` ç§»é™¤ `vika` é»˜è®¤é…ç½®
   - ä» `mergeConfig` æ–¹æ³•ä¸­ç§»é™¤ vika é…ç½®åˆå¹¶é€»è¾‘

4. **æ›´æ–°å‘½ä»¤æ³¨å†Œ**
   - ä» `packages/cli/src/index.ts` ç§»é™¤ push å’Œ pull å‘½ä»¤çš„å¯¼å…¥å’Œæ³¨å†Œ

5. **æ›´æ–°å…¶ä»–å‘½ä»¤**
   - ä» `packages/cli/src/commands/analyze.ts` ç§»é™¤ Vika ç›¸å…³ä»£ç 
     - ç§»é™¤ `VikaClient` å¯¼å…¥
     - ç§»é™¤ `includeCloud` é€‰é¡¹
     - ç§»é™¤äº‘ç«¯çŠ¶æ€åˆ†æé€»è¾‘
     - ç§»é™¤äº‘ç«¯çŠ¶æ€æ˜¾ç¤º
   - ä» `packages/cli/src/commands/init.ts` ç§»é™¤ Vika ç›¸å…³ä»£ç 
     - ç§»é™¤ `useVika` äº¤äº’é—®é¢˜
     - ç§»é™¤ Vika é…ç½®æ¨¡æ¿
     - ç§»é™¤ Vika ç¯å¢ƒå˜é‡æç¤º

#### ä¿®æ”¹çš„æ–‡ä»¶

```
åˆ é™¤æ–‡ä»¶ï¼š
- packages/cli/src/integrations/vika-client.ts
- packages/cli/src/commands/push.ts
- packages/cli/src/commands/pull.ts

ä¿®æ”¹æ–‡ä»¶ï¼š
- packages/cli/src/types/config.ts
- packages/cli/src/utils/config.ts
- packages/cli/src/index.ts
- packages/cli/src/commands/analyze.ts
- packages/cli/src/commands/init.ts
```

#### éªŒè¯ç»“æœ
- âœ… CLI åŒ…ä¸å†ä¾èµ– Vika
- âœ… push å’Œ pull å‘½ä»¤å·²ç§»é™¤
- âœ… é…ç½®æ–‡ä»¶ä¸å†åŒ…å« vika å­—æ®µ
- âœ… CLI å¯ä»¥ç‹¬ç«‹å®‰è£…å’Œä½¿ç”¨

---

### ä»»åŠ¡ 1.2ï¼šè§£è€¦ Vite Plugin âœ…

#### é—®é¢˜æè¿°
Vite Plugin åœ¨ `package.json` ä¸­å£°æ˜äº†å¯¹ CLI çš„ä¾èµ–ï¼ˆ`@translink/i18n-cli`ï¼‰ï¼Œä½†å®é™…ä¸Šä»£ç ä¸­å¹¶æœªä½¿ç”¨ CLI çš„åŠŸèƒ½ã€‚è¿™å¯¼è‡´ä¸å¿…è¦çš„ä¾èµ–å…³ç³»ã€‚

#### æ‰§è¡Œæ­¥éª¤

1. **æ£€æŸ¥å®é™…ä½¿ç”¨æƒ…å†µ**
   - æœç´¢ä»£ç ä¸­æ˜¯å¦æœ‰å¯¼å…¥ CLI çš„åœ°æ–¹
   - ç¡®è®¤æ²¡æœ‰å®é™…ä½¿ç”¨ CLI çš„ä»£ç 

2. **ç§»é™¤ä¾èµ–å£°æ˜**
   - ä» `packages/vite-plugin/package.json` çš„ `dependencies` ä¸­ç§»é™¤ `@translink/i18n-cli`

3. **æ›´æ–°é…ç½®æ¨¡æ¿**
   - ä» `packages/vite-plugin/src/core/config-manager.ts` çš„é»˜è®¤é…ç½®æ¨¡æ¿ä¸­ç§»é™¤å¯¹ `@translink/i18n-runtime` çš„ç±»å‹å¼•ç”¨
   - æ”¹ä¸ºé€šç”¨æ³¨é‡Šè¯´æ˜

#### ä¿®æ”¹çš„æ–‡ä»¶

```
ä¿®æ”¹æ–‡ä»¶ï¼š
- packages/vite-plugin/package.json
- packages/vite-plugin/src/core/config-manager.ts
```

#### éªŒè¯ç»“æœ
- âœ… Vite Plugin ä¸å†ä¾èµ– CLI
- âœ… package.json ä¾èµ–åˆ—è¡¨å·²æ¸…ç†
- âœ… Vite Plugin å¯ä»¥ç‹¬ç«‹å®‰è£…å’Œä½¿ç”¨

---

### ä»»åŠ¡ 1.3ï¼šç‹¬ç«‹ Runtime âœ…

#### é—®é¢˜æè¿°
éœ€è¦ç¡®è®¤ Runtime åŒ…å®Œå…¨ç‹¬ç«‹ï¼Œæ²¡æœ‰ä¾èµ–å…¶ä»–å†…éƒ¨åŒ…ã€‚

#### æ‰§è¡Œæ­¥éª¤

1. **æ£€æŸ¥ä¾èµ–æƒ…å†µ**
   - æ£€æŸ¥ `package.json` çš„ dependencies
   - æ£€æŸ¥ä»£ç ä¸­æ˜¯å¦æœ‰å¯¼å…¥å…¶ä»–å†…éƒ¨åŒ…
   - ç¡®è®¤ peerDependencies é…ç½®æ­£ç¡®

2. **éªŒè¯å¯¼å‡ºç»“æ„**
   - æ£€æŸ¥ä¸»å…¥å£ `src/index.ts` çš„å¯¼å‡º
   - æ£€æŸ¥ Vue é€‚é…å™¨ `src/vue.ts` çš„å¯¼å‡º
   - æ£€æŸ¥ React é€‚é…å™¨ `src/react.ts` çš„å¯¼å‡º

#### æ£€æŸ¥ç»“æœ

**ä¾èµ–æƒ…å†µ**ï¼š
- âœ… `dependencies`: åªæœ‰ `lru-cache`ï¼ˆå¿…éœ€ï¼‰
- âœ… `peerDependencies`: `vue` å’Œ `react`ï¼ˆéƒ½æ˜¯å¯é€‰çš„ï¼‰
- âœ… æ²¡æœ‰ä¾èµ–å…¶ä»–å†…éƒ¨åŒ…

**å¯¼å‡ºç»“æ„**ï¼š
- âœ… ä¸»å…¥å£å¯¼å‡ºæ ¸å¿ƒå¼•æ“å’Œå·¥å…·ç±»
- âœ… Vue é€‚é…å™¨é€šè¿‡ `./vue` è·¯å¾„å¯¼å‡º
- âœ… React é€‚é…å™¨é€šè¿‡ `./react` è·¯å¾„å¯¼å‡º
- âœ… ç±»å‹å®šä¹‰å®Œæ•´å¯¼å‡º

#### ä¿®æ”¹çš„æ–‡ä»¶

```
æ— éœ€ä¿®æ”¹ï¼ˆå·²å®Œå…¨ç‹¬ç«‹ï¼‰
```

#### éªŒè¯ç»“æœ
- âœ… Runtime åŒ…å®Œå…¨ç‹¬ç«‹
- âœ… åªæœ‰ä¸€ä¸ªå¿…éœ€ä¾èµ–ï¼ˆlru-cacheï¼‰
- âœ… Vue/React ä¸ºå¯é€‰ peerDependency
- âœ… å¯¼å‡ºç»“æ„æ¸…æ™°åˆç†

---

## ğŸ“Š é˜¶æ®µä¸€éªŒæ”¶æ ‡å‡†æ£€æŸ¥

æ ¹æ® `REFACTOR_PLAN.md` çš„éªŒæ”¶æ ‡å‡†ï¼š

| éªŒæ”¶æ ‡å‡† | çŠ¶æ€ | è¯´æ˜ |
|---------|------|------|
| CLIåŒ…å®Œå…¨ç‹¬ç«‹ï¼Œé›¶ä¾èµ–å…¶ä»–åŒ… | âœ… | å·²ç§»é™¤ Vika ä¾èµ–ï¼Œæ— å†…éƒ¨åŒ…ä¾èµ– |
| RuntimeåŒ…å®Œå…¨ç‹¬ç«‹ï¼Œé›¶ä¾èµ–å…¶ä»–åŒ… | âœ… | åªæœ‰ lru-cache ä¾èµ–ï¼ŒVue/React ä¸ºå¯é€‰ |
| Vite Pluginå®Œå…¨ç‹¬ç«‹ï¼Œé›¶ä¾èµ–å…¶ä»–åŒ…ï¼ˆé™¤äº†Runtime peerDependencyï¼‰ | âœ… | å·²ç§»é™¤ CLI ä¾èµ–ï¼Œåªä¾èµ–å¤–éƒ¨å·¥å…·åº“ |

**ç»“è®º**ï¼šâœ… æ‰€æœ‰éªŒæ”¶æ ‡å‡†å‡å·²è¾¾æˆ

---

## ğŸ” é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1ï¼šanalyze å‘½ä»¤ä¸­çš„äº‘ç«¯çŠ¶æ€åˆ†æ

**é—®é¢˜**ï¼šanalyze å‘½ä»¤ä¸­æœ‰å¯é€‰çš„äº‘ç«¯çŠ¶æ€åˆ†æåŠŸèƒ½ï¼Œä¾èµ– Vikaã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šå®Œå…¨ç§»é™¤äº‘ç«¯çŠ¶æ€åˆ†æåŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
- ç§»é™¤ `includeCloud` é€‰é¡¹
- ç§»é™¤äº‘ç«¯çŠ¶æ€åˆ†æé€»è¾‘
- ç§»é™¤äº‘ç«¯çŠ¶æ€æ˜¾ç¤º
- ç§»é™¤ç›¸å…³å»ºè®®ç”Ÿæˆé€»è¾‘

### é—®é¢˜ 2ï¼šinit å‘½ä»¤ä¸­çš„ Vika é…ç½®

**é—®é¢˜**ï¼šinit å‘½ä»¤ä¼šè¯¢é—®æ˜¯å¦ä½¿ç”¨ Vikaï¼Œå¹¶ç”Ÿæˆ Vika é…ç½®ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šç§»é™¤æ‰€æœ‰ Vika ç›¸å…³çš„äº¤äº’å’Œé…ç½®ç”Ÿæˆï¼Œç®€åŒ–åˆå§‹åŒ–æµç¨‹ã€‚

### é—®é¢˜ 3ï¼šVite Plugin çš„é…ç½®æ¨¡æ¿

**é—®é¢˜**ï¼šconfig-manager ä¸­çš„é»˜è®¤é…ç½®æ¨¡æ¿å¼•ç”¨äº† `@translink/i18n-runtime` ç±»å‹ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šç§»é™¤ç±»å‹å¼•ç”¨ï¼Œæ”¹ä¸ºé€šç”¨æ³¨é‡Šï¼Œä¿æŒé…ç½®æ¨¡æ¿çš„ç‹¬ç«‹æ€§ã€‚

---

## ğŸ“ˆ æ”¹è¿›æ•ˆæœ

### åŒ…ç‹¬ç«‹æ€§
- âœ… CLI åŒ…å¯ä»¥ç‹¬ç«‹å®‰è£…ï¼Œæ— éœ€ Vika
- âœ… Vite Plugin å¯ä»¥ç‹¬ç«‹å®‰è£…ï¼Œæ— éœ€ CLI
- âœ… Runtime åŒ…å®Œå…¨ç‹¬ç«‹ï¼Œä½“ç§¯æœ€å°

### ä¾èµ–å…³ç³»
- âœ… åŒ…ä¹‹é—´æ— å¼ºä¾èµ–å…³ç³»
- âœ… æ¯ä¸ªåŒ…éƒ½å¯ä»¥å•ç‹¬ä½¿ç”¨
- âœ… æŒ‰éœ€å®‰è£…ï¼Œå‡å°‘ä½“ç§¯

### ä»£ç è´¨é‡
- âœ… ç§»é™¤äº†æœªä½¿ç”¨çš„ä¾èµ–
- âœ… ä»£ç æ›´ç®€æ´ï¼ŒèŒè´£æ›´æ¸…æ™°
- âœ… ç¬¦åˆ"å•ä¸€èŒè´£"åŸåˆ™

---

## ğŸ“ æ–‡ä»¶å˜æ›´ç»Ÿè®¡

### åˆ é™¤æ–‡ä»¶ï¼ˆ3 ä¸ªï¼‰
1. `packages/cli/src/integrations/vika-client.ts`
2. `packages/cli/src/commands/push.ts`
3. `packages/cli/src/commands/pull.ts`

### ä¿®æ”¹æ–‡ä»¶ï¼ˆ7 ä¸ªï¼‰
1. `packages/cli/src/types/config.ts` - ç§»é™¤ vika ç±»å‹
2. `packages/cli/src/utils/config.ts` - ç§»é™¤ vika é…ç½®
3. `packages/cli/src/index.ts` - ç§»é™¤ push/pull å‘½ä»¤æ³¨å†Œ
4. `packages/cli/src/commands/analyze.ts` - ç§»é™¤äº‘ç«¯åˆ†æåŠŸèƒ½
5. `packages/cli/src/commands/init.ts` - ç§»é™¤ Vika é…ç½®ç”Ÿæˆ
6. `packages/vite-plugin/package.json` - ç§»é™¤ CLI ä¾èµ–
7. `packages/vite-plugin/src/core/config-manager.ts` - æ›´æ–°é…ç½®æ¨¡æ¿

### æ— éœ€ä¿®æ”¹ï¼ˆ1 ä¸ªï¼‰
- `packages/runtime/` - å·²å®Œå…¨ç‹¬ç«‹ï¼Œæ— éœ€ä¿®æ”¹

---

## âœ… ä¸‹ä¸€æ­¥è®¡åˆ’

æ ¹æ® `REFACTOR_PLAN.md`ï¼Œé˜¶æ®µä¸€å®Œæˆåï¼Œå¯ä»¥è¿›å…¥**é˜¶æ®µäºŒï¼šåŠŸèƒ½å®ç°**ã€‚

### é˜¶æ®µäºŒä¸»è¦ä»»åŠ¡
1. **CLI æ ¸å¿ƒåŠŸèƒ½å®Œå–„**
   - å®ç° `init` å‘½ä»¤ï¼ˆç”Ÿæˆé…ç½®æ–‡ä»¶ï¼‰
   - å®Œå–„ `extract` å‘½ä»¤ï¼ˆé”™è¯¯å¤„ç†ã€è¾¹ç•Œæƒ…å†µï¼‰
   - å®Œå–„ `build` å‘½ä»¤ï¼ˆä¼˜åŒ–ã€å‹ç¼©ï¼‰
   - å®ç° `export` å‘½ä»¤ï¼ˆExcel/CSV/JSONï¼‰
   - å®ç° `import` å‘½ä»¤ï¼ˆä» Excel å¯¼å…¥ï¼‰

2. **Excel å¯¼å‡ºåŠŸèƒ½**
   - ä½¿ç”¨ exceljs ç”Ÿæˆ Excel
   - æ”¯æŒå¤šè¯­è¨€åˆ—
   - æ”¯æŒå…ƒæ•°æ®ï¼ˆContextã€Fileã€Line ç­‰ï¼‰
   - æ”¯æŒçŠ¶æ€æ ‡è®°ï¼ˆpending/translated/reviewedï¼‰

3. **Excel å¯¼å…¥åŠŸèƒ½**
   - å®ç° Excel è§£æé€»è¾‘
   - éªŒè¯æ•°æ®æ ¼å¼
   - æ”¯æŒå¢é‡åˆå¹¶
   - å†²çªå¤„ç†ç­–ç•¥

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é‡æ„è®¡åˆ’](./REFACTOR_PLAN.md) - å®Œæ•´çš„é‡æ„æ–¹æ¡ˆ
- [é˜¶æ®µé›¶æ‰§è¡ŒæŠ¥å‘Š](./PHASE_ZERO_EXECUTION_REPORT.md) - å‰ç½®é—®é¢˜ä¿®å¤è®°å½•
- [ä»£ç çº¦å®š](./packages/CODE_CONVENTIONS.md) - å„åŒ…çš„ä»£ç çº¦å®š

---

**æŠ¥å‘Šå®Œæˆæ—¶é—´**: 2026-01-03  
**æ‰§è¡Œäºº**: AI Assistant  
**å®¡æ ¸çŠ¶æ€**: å¾…å®¡æ ¸

