# TransLink I18n å®Œå…¨é‡æ„æ–¹æ¡ˆ

> **é‡æ„ç›®æ ‡**ï¼šå®Œå…¨è§£è€¦ã€ç‹¬ç«‹åŒ…è®¾è®¡ã€å»é™¤Vikaå¼ºä¾èµ–ã€æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼

---

## ğŸ¯ æ ¸å¿ƒè®¾è®¡åŸåˆ™

### 1. **å®Œå…¨ç‹¬ç«‹çš„åŒ…è®¾è®¡**

- âœ… æ¯ä¸ªåŒ…å¯ä»¥ç‹¬ç«‹å®‰è£…å’Œä½¿ç”¨
- âœ… é›¶ç›¸äº’ä¾èµ–ï¼ˆé™¤äº†å¯é€‰çš„æ’ä»¶æœºåˆ¶ï¼‰
- âœ… æœ€å°åŒ–åŒ…ä½“ç§¯
- âœ… æŒ‰éœ€å®‰è£…ï¼Œä¸å¼ºåˆ¶å®‰è£…ä¸éœ€è¦çš„åŒ…

### 2. **è§£è€¦äº‘ç«¯é›†æˆ**

- âŒ ç§»é™¤ Vika å¼ºä¾èµ–
- âœ… Vika ä½œä¸ºå¯é€‰æ’ä»¶ï¼ˆç‹¬ç«‹åŒ…ï¼‰
- âœ… æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼ï¼šJSONã€Excelã€CSV
- âœ… æ”¯æŒè‡ªå®šä¹‰å¯¼å‡ºå™¨ï¼ˆæ’ä»¶æœºåˆ¶ï¼‰

### 3. **ç®€åŒ–å·¥ä½œæµ**

- âœ… ç”Ÿæˆæ ‡å‡† JSON æ–‡ä»¶ï¼ˆé»˜è®¤ï¼‰
- âœ… ç”Ÿæˆ Excel è¡¨æ ¼ï¼ˆç»™è¿è¥ç®¡ç†ï¼‰
- âœ… æ”¯æŒä» Excel/JSON å¯¼å…¥ç¿»è¯‘
- âœ… æ— éœ€äº‘ç«¯å³å¯å®Œæˆå®Œæ•´å·¥ä½œæµ

---

## ğŸ“¦ æ–°æ¶æ„è®¾è®¡

### åŒ…ç»“æ„ï¼ˆå®Œå…¨ç‹¬ç«‹ï¼‰

```
packages/
â”œâ”€â”€ cli/                    # @translink/i18n-cli
â”‚   â”œâ”€â”€ æ ¸å¿ƒåŠŸèƒ½ï¼šextract, build, init, analyze
â”‚   â”œâ”€â”€ è¾“å‡ºæ ¼å¼ï¼šJSONï¼ˆé»˜è®¤ï¼‰ã€Excelã€CSV
â”‚   â””â”€â”€ é›¶ä¾èµ–ï¼ˆé™¤äº†åŸºç¡€å·¥å…·åº“ï¼‰
â”‚
â”œâ”€â”€ runtime/                # @translink/i18n-runtime
â”‚   â”œâ”€â”€ æ ¸å¿ƒå¼•æ“ï¼šI18nEngine
â”‚   â”œâ”€â”€ æ¡†æ¶é€‚é…ï¼šVueã€Reactï¼ˆå¯é€‰å¯¼å‡ºï¼‰
â”‚   â””â”€â”€ é›¶ä¾èµ–ï¼ˆé™¤äº† lru-cacheï¼‰
â”‚
â”œâ”€â”€ vite-plugin/            # @translink/vite-plugin-i18n
â”‚   â”œâ”€â”€ æ„å»ºæ—¶è½¬æ¢
â”‚   â”œâ”€â”€ HMR æ”¯æŒ
â”‚   â””â”€â”€ ä¾èµ–ï¼šruntimeï¼ˆpeerDependencyï¼‰
â”‚
â””â”€â”€ plugins/                # å¯é€‰æ’ä»¶ï¼ˆç‹¬ç«‹åŒ…ï¼‰
    â”œâ”€â”€ vika/              # @translink/plugin-vikaï¼ˆå¯é€‰ï¼‰
    â”œâ”€â”€ excel-export/      # @translink/plugin-excelï¼ˆå¯é€‰ï¼‰
    â””â”€â”€ custom/            # è‡ªå®šä¹‰æ’ä»¶æ¥å£
```

### ä¾èµ–å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     CLI     â”‚  â† å®Œå…¨ç‹¬ç«‹ï¼Œé›¶ä¾èµ–
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Runtime   â”‚  â† å®Œå…¨ç‹¬ç«‹ï¼Œé›¶ä¾èµ–
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      peerDependency
â”‚Vite Plugin  â”‚ â”€â”€â”€â”€â”€â”€â†’ Runtime
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      optional
â”‚Plugin Vika  â”‚ â”€â”€â”€â”€â”€â”€â†’ CLI (é€šè¿‡æ’ä»¶æœºåˆ¶)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      optional
â”‚Plugin Excel â”‚ â”€â”€â”€â”€â”€â”€â†’ CLI (é€šè¿‡æ’ä»¶æœºåˆ¶)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ CLI åŒ…é‡æ„æ–¹æ¡ˆ

### æ ¸å¿ƒå‘½ä»¤ï¼ˆæ— äº‘ç«¯ä¾èµ–ï¼‰

#### 1. `translink init`

- ç”Ÿæˆé…ç½®æ–‡ä»¶ `i18n.config.ts`
- åˆ›å»ºç›®å½•ç»“æ„
- ç”Ÿæˆç¤ºä¾‹æ–‡ä»¶

#### 2. `translink extract`

- æ‰«æä»£ç ï¼Œæå–ä¸­æ–‡æ–‡æœ¬
- ç”Ÿæˆå“ˆå¸Œé”®
- **è¾“å‡º**ï¼š`locales/zh-CN.json`ï¼ˆé»˜è®¤è¯­è¨€ï¼‰
- **è¾“å‡º**ï¼š`locales/extraction-mapping.json`ï¼ˆæ˜ å°„æ–‡ä»¶ï¼‰

#### 3. `translink export`

- **æ–°å¢å‘½ä»¤**ï¼šå¯¼å‡ºä¸º Excel/CSV
- æ ¼å¼ï¼š`translink export --format excel --output translations.xlsx`
- Excel åˆ—ï¼š`key | zh-CN | en-US | ja-JP | ... | context | file | line`
- è¿è¥å¯ä»¥ç›´æ¥åœ¨ Excel ä¸­ç¼–è¾‘ç¿»è¯‘

#### 4. `translink import`

- **æ–°å¢å‘½ä»¤**ï¼šä» Excel/CSV å¯¼å…¥
- æ ¼å¼ï¼š`translink import --input translations.xlsx`
- è¯»å– Excelï¼Œæ›´æ–°å¯¹åº”çš„ JSON æ–‡ä»¶
- æ”¯æŒå¢é‡æ›´æ–°

#### 5. `translink build`

- æ„å»ºè¯­è¨€åŒ…
- ä¼˜åŒ–å’Œå‹ç¼©
- ç”Ÿæˆæœ€ç»ˆäº§ç‰©

#### 6. `translink analyze`

- åˆ†æç¿»è¯‘è¦†ç›–ç‡
- æ£€æµ‹æœªç¿»è¯‘é¡¹
- ç”ŸæˆæŠ¥å‘Š

### è¾“å‡ºæ ¼å¼æ”¯æŒ

#### JSONï¼ˆé»˜è®¤ï¼‰

```json
{
  "a1b2c3d4": "ç™»å½•",
  "e5f6g7h8": "ç”¨æˆ·å",
  ...
}
```

#### Excelï¼ˆè¿è¥å‹å¥½ï¼‰

```
| key        | zh-CN | en-US | ja-JP | context | file        | line |
|------------|-------|-------|-------|---------|-------------|------|
| a1b2c3d4   | ç™»å½•  | Login | ãƒ­ã‚°ã‚¤ãƒ³ | button  | Login.vue   | 12   |
| e5f6g7h8   | ç”¨æˆ·å| User  | ãƒ¦ãƒ¼ã‚¶ãƒ¼ | label   | Login.vue   | 15   |
```

#### CSVï¼ˆç®€å•æ ¼å¼ï¼‰

```csv
key,zh-CN,en-US,ja-JP,context,file,line
a1b2c3d4,ç™»å½•,Login,ãƒ­ã‚°ã‚¤ãƒ³,button,Login.vue,12
```

### æ’ä»¶æœºåˆ¶ï¼ˆå¯é€‰ï¼‰

```typescript
// CLI æ”¯æŒæ’ä»¶æœºåˆ¶
interface I18nPlugin {
  name: string;
  export?(data: TranslationData): Promise<void>;
  import?(): Promise<TranslationData>;
}

// ä½¿ç”¨æ’ä»¶
translink export --plugin vika
translink import --plugin vika
```

---

## ğŸ”Œ æ’ä»¶ç³»ç»Ÿè®¾è®¡

### æ’ä»¶æ¥å£

```typescript
// packages/cli/src/types/plugin.ts
export interface I18nPlugin {
  name: string;
  version: string;

  // å¯¼å‡ºç¿»è¯‘æ•°æ®
  export?(data: ExportData, options: PluginOptions): Promise<void>;

  // å¯¼å…¥ç¿»è¯‘æ•°æ®
  import?(options: PluginOptions): Promise<ImportData>;

  // éªŒè¯é…ç½®
  validate?(config: any): boolean;
}
```

### Vika æ’ä»¶ï¼ˆç‹¬ç«‹åŒ…ï¼‰

```typescript
// packages/plugins/vika/src/index.ts
export class VikaPlugin implements I18nPlugin {
  name = 'vika';

  async export(data: ExportData) {
    // æ¨é€åˆ° Vika
  }

  async import() {
    // ä» Vika æ‹‰å–
  }
}
```

**å®‰è£…æ–¹å¼**ï¼š

```bash
# å¯é€‰å®‰è£…
pnpm add @translink/plugin-vika

# ä½¿ç”¨
translink export --plugin vika
```

### Excel æ’ä»¶ï¼ˆå†…ç½®ï¼Œä½†å¯æ‰©å±•ï¼‰

```typescript
// packages/cli/src/plugins/excel.ts
export class ExcelPlugin implements I18nPlugin {
  name = 'excel';

  async export(data: ExportData, options: { output: string }) {
    // ç”Ÿæˆ Excel æ–‡ä»¶
  }

  async import(options: { input: string }) {
    // è¯»å– Excel æ–‡ä»¶
  }
}
```

---

## ğŸ“Š å·¥ä½œæµå¯¹æ¯”

### æ—§å·¥ä½œæµï¼ˆVika å¼ºä¾èµ–ï¼‰

```
1. translink extract
2. translink push (å¿…é¡»é…ç½® Vika)
3. åœ¨ Vika ä¸­ç¿»è¯‘
4. translink pull (å¿…é¡»é…ç½® Vika)
5. translink build
```

### æ–°å·¥ä½œæµï¼ˆæ— äº‘ç«¯ä¾èµ–ï¼‰

```
æ–¹æ¡ˆAï¼šExcel å·¥ä½œæµï¼ˆæ¨èï¼‰
1. translink extract
2. translink export --format excel
3. è¿è¥åœ¨ Excel ä¸­ç¿»è¯‘
4. translink import --input translations.xlsx
5. translink build

æ–¹æ¡ˆBï¼šJSON å·¥ä½œæµ
1. translink extract
2. æ‰‹åŠ¨ç¼–è¾‘ locales/*.json
3. translink build

æ–¹æ¡ˆCï¼šVika å·¥ä½œæµï¼ˆå¯é€‰ï¼‰
1. translink extract
2. translink export --plugin vika
3. åœ¨ Vika ä¸­ç¿»è¯‘
4. translink import --plugin vika
5. translink build
```

---

## ğŸ—ï¸ åŒ…ä¾èµ–è®¾è®¡

### CLI åŒ…ä¾èµ–

```json
{
  "dependencies": {
    "commander": "^11.1.0",
    "chalk": "^5.3.0",
    "ora": "^8.0.0",
    "gogocode": "^1.0.0",
    "glob": "^10.3.0",
    "inquirer": "^9.2.0",
    "exceljs": "^4.4.0" // Excel æ”¯æŒï¼ˆå†…ç½®ï¼‰
  },
  "peerDependencies": {},
  "optionalDependencies": {}
}
```

**ç‰¹ç‚¹**ï¼š

- âœ… é›¶ peerDependencies
- âœ… å¯ä»¥ç‹¬ç«‹å®‰è£…ä½¿ç”¨
- âœ… Excel æ”¯æŒå†…ç½®ï¼ˆå¸¸ç”¨åŠŸèƒ½ï¼‰

### Runtime åŒ…ä¾èµ–

```json
{
  "dependencies": {
    "lru-cache": "^10.1.0"
  },
  "peerDependencies": {
    "vue": "^3.0.0", // å¯é€‰
    "react": "^18.0.0" // å¯é€‰
  }
}
```

**ç‰¹ç‚¹**ï¼š

- âœ… æœ€å°ä¾èµ–
- âœ… Vue/React ä¸ºå¯é€‰ peerDependency

### Vite Plugin åŒ…ä¾èµ–

```json
{
  "dependencies": {
    "gogocode": "^1.0.0",
    "fast-glob": "^3.3.2",
    "magic-string": "^0.30.5"
  },
  "peerDependencies": {
    "vite": "^4.0.0 || ^5.0.0",
    "@translink/i18n-runtime": "^1.0.0" // è¿è¡Œæ—¶ä¾èµ–
  }
}
```

**ç‰¹ç‚¹**ï¼š

- âœ… ä¸ä¾èµ– CLI
- âœ… åªä¾èµ– Runtimeï¼ˆå¿…éœ€ï¼‰

### Vika æ’ä»¶åŒ…ä¾èµ–

```json
{
  "dependencies": {
    "node-fetch": "^3.3.0"
  },
  "peerDependencies": {
    "@translink/i18n-cli": "^1.0.0" // é€šè¿‡æ’ä»¶æœºåˆ¶ä½¿ç”¨
  }
}
```

**ç‰¹ç‚¹**ï¼š

- âœ… å®Œå…¨å¯é€‰
- âœ… ä¸å®‰è£…ä¸å½±å“ CLI ä½¿ç”¨

---

## ğŸ”„ é‡æ„å®æ–½è®¡åˆ’

> âš ï¸ **é‡è¦æç¤º**ï¼šå¿…é¡»å…ˆå®Œæˆé˜¶æ®µé›¶çš„æ‰€æœ‰å‰ç½®é—®é¢˜ä¿®å¤ï¼Œæ‰èƒ½è¿›è¡Œåç»­çš„åŠŸèƒ½é‡æ„ã€‚è¿™äº›åŸºç¡€æ¶æ„é—®é¢˜æ˜¯åç»­å·¥ä½œçš„å‰ææ¡ä»¶ã€‚

### é˜¶æ®µé›¶ï¼šå‰ç½®é—®é¢˜ä¿®å¤ï¼ˆWeek 1-2ï¼‰ğŸ”´ P0 - å¿…é¡»å®Œæˆ

> **å‚è€ƒ**ï¼šè¿™äº›é—®é¢˜æ¥è‡ª `PROJECT_AUDIT_REPORT.md` çš„è¯¦ç»†åˆ†æ

#### 0.1 ä¿®å¤ TypeScript é…ç½®å†²çª

**é—®é¢˜**ï¼šCLIåŒ…çš„ `tsconfig.json` è®¾ç½®äº† `noEmit: true`ï¼Œå¯¼è‡´æ— æ³•æ„å»ºç±»å‹å£°æ˜æ–‡ä»¶

**ä»»åŠ¡æ¸…å•**ï¼š

- [ ] åˆ›å»ºæ ¹ç›®å½• `tsconfig.base.json`ï¼ˆåŸºç¡€é…ç½®ï¼‰
- [ ] ä¸ºæ¯ä¸ªåŒ…åˆ›å»º `tsconfig.build.json`ï¼ˆæ„å»ºé…ç½®ï¼‰
- [ ] æ›´æ–°å„åŒ…çš„ `tsconfig.json`ï¼ˆå¼€å‘é…ç½®ï¼ŒnoEmit: trueï¼‰
- [ ] æ›´æ–°æ„å»ºè„šæœ¬ä½¿ç”¨ `tsconfig.build.json`
- [ ] éªŒè¯ç±»å‹æ£€æŸ¥å’Œæ„å»ºéƒ½æ­£å¸¸å·¥ä½œ
- [ ] ç¡®ä¿æ‰€æœ‰åŒ…éƒ½èƒ½æ­£ç¡®ç”Ÿæˆ `.d.ts` æ–‡ä»¶

**æ–‡ä»¶ç»“æ„**ï¼š

```
æ ¹ç›®å½•/
â”œâ”€â”€ tsconfig.base.json          # åŸºç¡€é…ç½®
â”œâ”€â”€ tsconfig.json               # é¡¹ç›®å¼•ç”¨é…ç½®
â””â”€â”€ packages/
    â”œâ”€â”€ cli/
    â”‚   â”œâ”€â”€ tsconfig.json       # å¼€å‘é…ç½®ï¼ˆnoEmit: trueï¼‰
    â”‚   â””â”€â”€ tsconfig.build.json # æ„å»ºé…ç½®ï¼ˆnoEmit: falseï¼‰
    â”œâ”€â”€ runtime/
    â”‚   â”œâ”€â”€ tsconfig.json
    â”‚   â””â”€â”€ tsconfig.build.json
    â””â”€â”€ vite-plugin/
        â”œâ”€â”€ tsconfig.json
        â””â”€â”€ tsconfig.build.json
```

#### 0.2 ç»Ÿä¸€æ„å»ºå·¥å…·

**é—®é¢˜**ï¼šCLIç”¨tsupï¼ŒRuntimeç”¨rollupï¼ŒVite Pluginç”¨tsupï¼Œä¸ç»Ÿä¸€

**ä»»åŠ¡æ¸…å•**ï¼š

- [ ] ç»Ÿä¸€ä½¿ç”¨ `tsup`ï¼ˆæ¨èï¼Œæ›´ç°ä»£ï¼‰
- [ ] åˆ›å»º `tools/config/tsup.config.base.ts`ï¼ˆå…±äº«é…ç½®ï¼‰
- [ ] RuntimeåŒ…ä»rollupè¿ç§»åˆ°tsup
- [ ] ç»Ÿä¸€æ‰€æœ‰åŒ…çš„æ„å»ºè„šæœ¬
- [ ] éªŒè¯æ„å»ºè¾“å‡ºæ ¼å¼ä¸€è‡´
- [ ] ç¡®ä¿Source Mapæ­£ç¡®ç”Ÿæˆ
- [ ] éªŒè¯Tree-shakingæ­£å¸¸å·¥ä½œ

#### 0.3 ä¿®å¤ Monorepo é¡¹ç›®å¼•ç”¨

**é—®é¢˜**ï¼šTypeScripté¡¹ç›®å¼•ç”¨é…ç½®ä¸å®Œæ•´ï¼Œå½±å“ç±»å‹æ£€æŸ¥å’ŒIDEæç¤º

**ä»»åŠ¡æ¸…å•**ï¼š

- [ ] å®Œå–„æ ¹ç›®å½• `tsconfig.json` çš„ references
- [ ] ä¸ºæ¯ä¸ªåŒ…æ·»åŠ  `composite: true`
- [ ] æ­£ç¡®é…ç½®åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»
- [ ] éªŒè¯å¢é‡æ„å»ºæ­£å¸¸å·¥ä½œ
- [ ] éªŒè¯IDEæ™ºèƒ½æç¤ºæ­£å¸¸
- [ ] æµ‹è¯•ç±»å‹æ£€æŸ¥æ€§èƒ½

#### 0.4 è§£å†³ä»£ç å†—ä½™é—®é¢˜

**é—®é¢˜**ï¼šLoggerã€ç±»å‹å®šä¹‰ã€å·¥å…·å‡½æ•°åœ¨å¤šå¤„é‡å¤

**ä¸´æ—¶æ–¹æ¡ˆ**ï¼ˆä¸åˆ›å»ºå…±äº«åŒ…ï¼Œé¿å…ä¾èµ–ï¼‰ï¼š

- [ ] æå–Loggeråˆ°CLIåŒ…å†…éƒ¨å·¥å…·ï¼ˆå…¶ä»–åŒ…å¤åˆ¶ä¸€ä»½ï¼Œä¿æŒç‹¬ç«‹ï¼‰
- [ ] ç»Ÿä¸€ç±»å‹å®šä¹‰å‘½åï¼ˆé¿å…å†²çªï¼‰
- [ ] æ–‡æ¡£åŒ–å„åŒ…çš„ç±»å‹å®šä¹‰çº¦å®š
- [ ] æ ‡è®°é‡å¤ä»£ç ï¼Œåç»­ä¼˜åŒ–

**æ³¨æ„**ï¼šä¸ºäº†ä¿æŒåŒ…å®Œå…¨ç‹¬ç«‹ï¼Œæš‚æ—¶ä¸åˆ›å»ºå…±äº«åŒ…ï¼Œè€Œæ˜¯é€šè¿‡æ–‡æ¡£å’Œçº¦å®šæ¥ç®¡ç†

#### 0.5 ä¼˜åŒ–æ–‡ä»¶ç»„ç»‡

**é—®é¢˜**ï¼šæµ‹è¯•æ–‡ä»¶åœ¨srcå†…éƒ¨ï¼Œå½±å“æ„å»º

**ä»»åŠ¡æ¸…å•**ï¼š

- [ ] ç§»åŠ¨æµ‹è¯•æ–‡ä»¶åˆ°ç‹¬ç«‹ç›®å½•
  - `packages/cli/src/__tests__/` â†’ `packages/cli/tests/`
  - `packages/runtime/src/__tests__/` â†’ `packages/runtime/tests/`
  - `packages/vite-plugin/src/__tests__/` â†’ `packages/vite-plugin/tests/`
- [ ] æ›´æ–°æµ‹è¯•é…ç½®è·¯å¾„
- [ ] æ›´æ–° `.gitignore`
- [ ] éªŒè¯æ„å»ºä¸åŒ…å«æµ‹è¯•æ–‡ä»¶
- [ ] éªŒè¯æµ‹è¯•ä»èƒ½æ­£å¸¸è¿è¡Œ

#### 0.6 ä¼˜åŒ– Turbo é…ç½®

**é—®é¢˜**ï¼šæµ‹è¯•ä¾èµ–buildï¼Œoutputsé…ç½®è¿‡å®½

**ä»»åŠ¡æ¸…å•**ï¼š

- [ ] ä¿®å¤ `turbo.json`ï¼š
  - testä»»åŠ¡ä¸ä¾èµ–build
  - ç²¾ç¡®åŒ–outputsé…ç½®
  - ä¼˜åŒ–ç¼“å­˜ç­–ç•¥
- [ ] æ·»åŠ lintç¼“å­˜é…ç½®
- [ ] æ·»åŠ type-checkç¼“å­˜é…ç½®
- [ ] éªŒè¯Turboç¼“å­˜æ­£å¸¸å·¥ä½œ

**ä¿®å¤åçš„é…ç½®**ï¼š

```json
{
  "pipeline": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": ["dist/**"]
    },
    "test": {
      "dependsOn": [], // ä¸ä¾èµ–build
      "outputs": ["coverage/**"]
    },
    "type-check": {
      "dependsOn": [],
      "outputs": []
    }
  }
}
```

#### 0.7 å®Œå–„é…ç½®æ–‡ä»¶

**ä»»åŠ¡æ¸…å•**ï¼š

- [ ] ä¸ºæ¯ä¸ªåŒ…æ·»åŠ  `.npmignore` æˆ–å®Œå–„ `files` å­—æ®µ
- [ ] æ·»åŠ  `.editorconfig`
- [ ] ç»Ÿä¸€ESLinté…ç½®ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
- [ ] æ·»åŠ  `commitlint` é…ç½®ï¼ˆå¯é€‰ï¼‰

**é˜¶æ®µé›¶éªŒæ”¶æ ‡å‡†**ï¼š

- âœ… æ‰€æœ‰åŒ…éƒ½èƒ½æ­£ç¡®æ„å»ºå¹¶ç”Ÿæˆç±»å‹æ–‡ä»¶
- âœ… æ„å»ºå·¥å…·ç»Ÿä¸€ï¼Œè¾“å‡ºæ ¼å¼ä¸€è‡´
- âœ… TypeScripté¡¹ç›®å¼•ç”¨æ­£å¸¸å·¥ä½œ
- âœ… æµ‹è¯•æ–‡ä»¶å·²ç§»å‡ºsrcï¼Œæ„å»ºä¸åŒ…å«æµ‹è¯•
- âœ… Turboç¼“å­˜ç­–ç•¥ä¼˜åŒ–å®Œæˆ

---

### é˜¶æ®µä¸€ï¼šæ¶æ„è§£è€¦ï¼ˆWeek 3-4ï¼‰ğŸŸ¡ P1

> **å‰æ**ï¼šé˜¶æ®µé›¶çš„æ‰€æœ‰ä»»åŠ¡å¿…é¡»100%å®Œæˆ

#### 1.1 è§£è€¦CLIåŒ…

- [ ] ç§»é™¤Vikaå¼ºä¾èµ–ä»£ç 
- [ ] ç§»é™¤ `packages/cli/src/integrations/vika-client.ts`
- [ ] ç§»é™¤ `packages/cli/src/commands/push.ts`ï¼ˆæ”¹ä¸ºæ’ä»¶å‘½ä»¤ï¼‰
- [ ] ç§»é™¤ `packages/cli/src/commands/pull.ts`ï¼ˆæ”¹ä¸ºæ’ä»¶å‘½ä»¤ï¼‰
- [ ] æ›´æ–° `package.json` ç§»é™¤Vikaç›¸å…³ä¾èµ–
- [ ] éªŒè¯CLIå¯ä»¥ç‹¬ç«‹å®‰è£…å’Œä½¿ç”¨

#### 1.2 è§£è€¦Vite Plugin

- [ ] ç§»é™¤å¯¹CLIçš„ä¾èµ–ï¼ˆ`@translink/i18n-cli`ï¼‰
- [ ] ç‹¬ç«‹é…ç½®ç³»ç»Ÿï¼ˆä¸ä¾èµ–CLIé…ç½®ï¼‰
- [ ] ç‹¬ç«‹ç±»å‹å®šä¹‰ï¼ˆä¸å¯¼å…¥CLIç±»å‹ï¼‰
- [ ] æ›´æ–° `package.json`
- [ ] éªŒè¯Vite Pluginå¯ä»¥ç‹¬ç«‹å®‰è£…å’Œä½¿ç”¨

#### 1.3 ç‹¬ç«‹Runtime

- [ ] æ£€æŸ¥å¹¶ç§»é™¤ä¸å¿…è¦çš„ä¾èµ–
- [ ] ç¡®ä¿Vue/Reactä¸ºå¯é€‰peerDependency
- [ ] ä¼˜åŒ–å¯¼å‡ºç»“æ„
- [ ] éªŒè¯Runtimeå¯ä»¥ç‹¬ç«‹å®‰è£…å’Œä½¿ç”¨

**é˜¶æ®µä¸€éªŒæ”¶æ ‡å‡†**ï¼š

- âœ… CLIåŒ…å®Œå…¨ç‹¬ç«‹ï¼Œé›¶ä¾èµ–å…¶ä»–åŒ…
- âœ… RuntimeåŒ…å®Œå…¨ç‹¬ç«‹ï¼Œé›¶ä¾èµ–å…¶ä»–åŒ…
- âœ… Vite Pluginå®Œå…¨ç‹¬ç«‹ï¼Œé›¶ä¾èµ–å…¶ä»–åŒ…ï¼ˆé™¤äº†Runtime peerDependencyï¼‰

---

### é˜¶æ®µäºŒï¼šåŠŸèƒ½å®ç°ï¼ˆWeek 5-6ï¼‰ğŸŸ¡ P1

> **å‰æ**ï¼šé˜¶æ®µä¸€å®Œæˆï¼ŒåŒ…å·²å®Œå…¨è§£è€¦

#### 2.1 CLIæ ¸å¿ƒåŠŸèƒ½å®Œå–„

- [ ] å®ç°`init`å‘½ä»¤ï¼ˆç”Ÿæˆé…ç½®æ–‡ä»¶ï¼‰
- [ ] å®Œå–„`extract`å‘½ä»¤ï¼ˆé”™è¯¯å¤„ç†ã€è¾¹ç•Œæƒ…å†µï¼‰
- [ ] å®Œå–„`build`å‘½ä»¤ï¼ˆä¼˜åŒ–ã€å‹ç¼©ï¼‰
- [ ] å®ç°`export`å‘½ä»¤ï¼ˆExcel/CSV/JSONï¼‰
- [ ] å®ç°`import`å‘½ä»¤ï¼ˆä»Excelå¯¼å…¥ï¼‰

#### 2.2 Excelå¯¼å‡ºåŠŸèƒ½

- [ ] å®‰è£…exceljsä¾èµ–ï¼ˆæˆ–ä½¿ç”¨optionalDependenciesï¼‰
- [ ] å®ç°Excelç”Ÿæˆé€»è¾‘
- [ ] æ”¯æŒå¤šè¯­è¨€åˆ—
- [ ] æ”¯æŒå…ƒæ•°æ®ï¼ˆContextã€Fileã€Lineç­‰ï¼‰
- [ ] æ”¯æŒçŠ¶æ€æ ‡è®°ï¼ˆpending/translated/reviewedï¼‰
- [ ] æ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿ï¼ˆå¯é€‰ï¼‰
- [ ] æ·»åŠ æ ·å¼å’Œæ ¼å¼åŒ–

#### 2.3 Excelå¯¼å…¥åŠŸèƒ½

- [ ] å®ç°Excelè§£æé€»è¾‘
- [ ] éªŒè¯æ•°æ®æ ¼å¼
- [ ] æ”¯æŒå¢é‡åˆå¹¶
- [ ] å†²çªå¤„ç†ç­–ç•¥
- [ ] é”™è¯¯æç¤ºå’Œæ—¥å¿—

**é˜¶æ®µäºŒéªŒæ”¶æ ‡å‡†**ï¼š

- âœ… Excelå¯¼å‡ºåŠŸèƒ½å®Œæ•´å¯ç”¨
- âœ… Excelå¯¼å…¥åŠŸèƒ½å®Œæ•´å¯ç”¨
- âœ… CSVå’ŒJSONå¯¼å‡ºå¯ç”¨
- âœ… initå‘½ä»¤å¯ç”¨

---

### é˜¶æ®µä¸‰ï¼šæ’ä»¶ç³»ç»Ÿï¼ˆWeek 7-8ï¼‰ğŸŸ¢ P2

> **å‰æ**ï¼šé˜¶æ®µäºŒå®Œæˆï¼ŒExcelåŠŸèƒ½å¯ç”¨

#### 3.1 æ’ä»¶æ¶æ„è®¾è®¡

- [ ] è®¾è®¡æ’ä»¶æ¥å£ï¼ˆI18nPluginï¼‰
- [ ] å®ç°æ’ä»¶åŠ è½½æœºåˆ¶
- [ ] æ’ä»¶æ³¨å†Œç³»ç»Ÿ
- [ ] æ’ä»¶é…ç½®ç®¡ç†
- [ ] æ’ä»¶é”™è¯¯å¤„ç†

#### 3.2 Vikaæ’ä»¶å¼€å‘ï¼ˆå¯é€‰ï¼‰

- [ ] åˆ›å»º`packages/plugins/vika/`ç›®å½•
- [ ] åˆ›å»ºç‹¬ç«‹çš„package.json
- [ ] å®ç°VikaClientï¼ˆä»CLIè¿ç§»ï¼‰
- [ ] å®ç°æ’ä»¶æ¥å£
- [ ] å®ç°pushåŠŸèƒ½
- [ ] å®ç°pullåŠŸèƒ½
- [ ] æ·»åŠ æµ‹è¯•
- [ ] ç‹¬ç«‹å‘å¸ƒåˆ°npm

**é˜¶æ®µä¸‰éªŒæ”¶æ ‡å‡†**ï¼š

- âœ… æ’ä»¶ç³»ç»Ÿå¯ç”¨
- âœ… Vikaæ’ä»¶å¯ä»¥ç‹¬ç«‹å®‰è£…å’Œä½¿ç”¨

---

### é˜¶æ®µå››ï¼šæµ‹è¯•å’Œä¼˜åŒ–ï¼ˆWeek 9-10ï¼‰ğŸŸ¢ P2

#### 4.1 æµ‹è¯•å®Œå–„

- [ ] ä¸ºæ‰€æœ‰æ–°åŠŸèƒ½æ·»åŠ å•å…ƒæµ‹è¯•
- [ ] æ·»åŠ é›†æˆæµ‹è¯•ï¼ˆå®Œæ•´å·¥ä½œæµï¼‰
- [ ] æ·»åŠ E2Eæµ‹è¯•ï¼ˆCLIå‘½ä»¤ï¼‰
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] ä¿®å¤æµ‹è¯•ä¸­å‘ç°çš„é—®é¢˜

#### 4.2 æ€§èƒ½ä¼˜åŒ–

- [ ] ASTè§£æç¼“å­˜ä¼˜åŒ–
- [ ] æ–‡ä»¶æ‰«æå¹¶å‘æ§åˆ¶
- [ ] å“ˆå¸Œè®¡ç®—ä¼˜åŒ–
- [ ] ç¼“å­˜ç­–ç•¥ä¼˜åŒ–
- [ ] åŒ…ä½“ç§¯åˆ†æï¼ˆbundlephobiaï¼‰

#### 4.3 æ–‡æ¡£å®Œå–„

- [ ] æ›´æ–°READMEï¼ˆç‹¬ç«‹ä½¿ç”¨è¯´æ˜ï¼‰
- [ ] æ›´æ–°ä½¿ç”¨æŒ‡å—ï¼ˆExcelå·¥ä½œæµï¼‰
- [ ] æ·»åŠ æ’ä»¶å¼€å‘æ–‡æ¡£
- [ ] æ·»åŠ è¿ç§»æŒ‡å—
- [ ] æ›´æ–°APIæ–‡æ¡£

**é˜¶æ®µå››éªŒæ”¶æ ‡å‡†**ï¼š

- âœ… æµ‹è¯•è¦†ç›–ç‡è¾¾æ ‡
- âœ… æ€§èƒ½ä¼˜åŒ–å®Œæˆ
- âœ… æ–‡æ¡£å®Œæ•´æ›´æ–°

---

## ğŸ“‹ å®æ–½æ¸…å•

### CLI åŒ…é‡æ„

- [ ] ç§»é™¤ `packages/cli/src/integrations/vika-client.ts`
- [ ] ç§»é™¤ `packages/cli/src/commands/push.ts`ï¼ˆæ”¹ä¸ºæ’ä»¶å‘½ä»¤ï¼‰
- [ ] ç§»é™¤ `packages/cli/src/commands/pull.ts`ï¼ˆæ”¹ä¸ºæ’ä»¶å‘½ä»¤ï¼‰
- [ ] æ–°å¢ `packages/cli/src/commands/export.ts`
- [ ] æ–°å¢ `packages/cli/src/commands/import.ts`
- [ ] æ–°å¢ `packages/cli/src/plugins/excel.ts`
- [ ] æ–°å¢ `packages/cli/src/core/plugin-manager.ts`
- [ ] æ›´æ–° `package.json` ä¾èµ–

### Runtime åŒ…ä¼˜åŒ–

- [ ] æ£€æŸ¥å¹¶ç§»é™¤ä¸å¿…è¦çš„ä¾èµ–
- [ ] ç¡®ä¿ Vue/React ä¸ºå¯é€‰ peerDependency
- [ ] ä¼˜åŒ–å¯¼å‡ºç»“æ„

### Vite Plugin é‡æ„

- [ ] ç§»é™¤ `@translink/i18n-cli` ä¾èµ–
- [ ] æ›´æ–°ä¸ºåªä¾èµ– Runtime
- [ ] æµ‹è¯•ç‹¬ç«‹ä½¿ç”¨

### æ’ä»¶åŒ…åˆ›å»º

- [ ] åˆ›å»º `packages/plugins/vika/`
- [ ] å®ç° Vika æ’ä»¶
- [ ] åˆ›å»º `packages/plugins/excel/`ï¼ˆå¯é€‰ï¼Œæˆ–å†…ç½®åˆ° CLIï¼‰

### æ–‡æ¡£æ›´æ–°

- [ ] æ›´æ–° README
- [ ] æ›´æ–°ä½¿ç”¨æŒ‡å—
- [ ] ç¼–å†™æ’ä»¶å¼€å‘æ–‡æ¡£
- [ ] ç¼–å†™è¿ç§»æŒ‡å—

---

## ğŸ¯ å…³é”®å†³ç­–ç‚¹

### 1. Excel æ”¯æŒæ–¹å¼

**é€‰é¡¹A**ï¼šå†…ç½®åˆ° CLIï¼ˆæ¨èï¼‰

- âœ… å¸¸ç”¨åŠŸèƒ½ï¼Œæ— éœ€é¢å¤–å®‰è£…
- âœ… ç®€åŒ–ä½¿ç”¨æµç¨‹
- âŒ å¢åŠ  CLI åŒ…ä½“ç§¯ï¼ˆ~200KBï¼‰

**é€‰é¡¹B**ï¼šç‹¬ç«‹æ’ä»¶åŒ…

- âœ… CLI åŒ…æ›´å°
- âŒ éœ€è¦é¢å¤–å®‰è£…

**å†³ç­–**ï¼šé€‰é¡¹Aï¼ˆå†…ç½®ï¼‰ï¼Œå› ä¸º Excel æ˜¯ä¸»è¦å·¥ä½œæµ

### 2. æ’ä»¶åŠ è½½æœºåˆ¶

**é€‰é¡¹A**ï¼šåŠ¨æ€ requireï¼ˆNode.jsï¼‰

```typescript
const plugin = require(`@translink/plugin-${name}`);
```

**é€‰é¡¹B**ï¼šé…ç½®æ³¨å†Œ

```typescript
// i18n.config.ts
plugins: ['@translink/plugin-vika'];
```

**å†³ç­–**ï¼šé€‰é¡¹Bï¼ˆé…ç½®æ³¨å†Œï¼‰ï¼Œæ›´æ˜ç¡®ã€æ›´å®‰å…¨

### 3. Excel åº“é€‰æ‹©

**é€‰é¡¹A**ï¼šexceljsï¼ˆæ¨èï¼‰

- âœ… åŠŸèƒ½å®Œæ•´
- âœ… æ”¯æŒæ ·å¼
- âœ… æ´»è·ƒç»´æŠ¤

**é€‰é¡¹B**ï¼šxlsx

- âœ… ä½“ç§¯æ›´å°
- âŒ åŠŸèƒ½è¾ƒå°‘

**å†³ç­–**ï¼šé€‰é¡¹Aï¼ˆexceljsï¼‰ï¼ŒåŠŸèƒ½æ›´é‡è¦

---

## ğŸ“¦ åŒ…ä½“ç§¯ä¼˜åŒ–

### CLI åŒ…ï¼ˆç›®æ ‡ï¼š< 2MBï¼‰

```
å½“å‰ä¾èµ–ï¼š
- commander: ~200KB
- chalk: ~50KB
- ora: ~100KB
- gogocode: ~500KB
- glob: ~200KB
- inquirer: ~300KB
- exceljs: ~400KB
æ€»è®¡ï¼š~1.75MB âœ…
```

### Runtime åŒ…ï¼ˆç›®æ ‡ï¼š< 100KBï¼‰

```
å½“å‰ä¾èµ–ï¼š
- lru-cache: ~50KB
æ€»è®¡ï¼š~50KB âœ…
```

### Vite Plugin åŒ…ï¼ˆç›®æ ‡ï¼š< 500KBï¼‰

```
å½“å‰ä¾èµ–ï¼š
- gogocode: ~500KB
- fast-glob: ~100KB
- magic-string: ~50KB
æ€»è®¡ï¼š~650KB âš ï¸ï¼ˆå¯ä¼˜åŒ–ï¼‰
```

---

## ğŸš€ å®æ–½ä¼˜å…ˆçº§

### P0 - æ ¸å¿ƒé‡æ„ï¼ˆå¿…é¡»ï¼‰

1. âœ… CLI ç§»é™¤ Vika ä¾èµ–
2. âœ… CLI å®ç° Excel å¯¼å‡º/å¯¼å…¥
3. âœ… Runtime ç¡®ä¿é›¶ä¾èµ–
4. âœ… Vite Plugin ç§»é™¤ CLI ä¾èµ–

### P1 - æ’ä»¶ç³»ç»Ÿï¼ˆé‡è¦ï¼‰

5. âœ… å®ç°æ’ä»¶æœºåˆ¶
6. âœ… å¼€å‘ Vika æ’ä»¶
7. âœ… å®Œå–„ Excel åŠŸèƒ½

### P2 - ä¼˜åŒ–å’Œæ–‡æ¡£ï¼ˆæ¬¡è¦ï¼‰

8. âš ï¸ åŒ…ä½“ç§¯ä¼˜åŒ–
9. âš ï¸ æ–‡æ¡£å®Œå–„
10. âš ï¸ æµ‹è¯•è¦†ç›–

---

## ğŸ“ é…ç½®æ–‡ä»¶å˜æ›´

### æ–°é…ç½®æ ¼å¼

```typescript
// i18n.config.ts
export default {
  // æå–é…ç½®
  extract: {
    patterns: ['src/**/*.{vue,tsx,ts}'],
    functions: ['t', '$tsl'],
  },

  // è¯­è¨€é…ç½®
  languages: {
    default: 'zh-CN',
    supported: ['zh-CN', 'en-US', 'ja-JP'],
  },

  // è¾“å‡ºé…ç½®
  output: {
    directory: 'locales',
    format: 'json', // json | excel | csv
  },

  // æ’ä»¶é…ç½®ï¼ˆå¯é€‰ï¼‰
  plugins: {
    // Vika æ’ä»¶é…ç½®ï¼ˆå¯é€‰ï¼‰
    vika: {
      enabled: false,
      apiKey: process.env.VIKA_API_KEY,
      datasheetId: process.env.VIKA_DATASHEET_ID,
    },

    // Excel æ’ä»¶é…ç½®
    excel: {
      enabled: true,
      template: './templates/translation.xlsx', // å¯é€‰æ¨¡æ¿
    },
  },
} satisfies I18nConfig;
```

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶

- [ ] CLI å¯ä»¥ç‹¬ç«‹å®‰è£…å’Œä½¿ç”¨ï¼ˆæ—  Vikaï¼‰
- [ ] å¯ä»¥å¯¼å‡º Excel æ–‡ä»¶
- [ ] å¯ä»¥ä» Excel å¯¼å…¥ç¿»è¯‘
- [ ] Vika æ’ä»¶å¯ä»¥ç‹¬ç«‹å®‰è£…
- [ ] Runtime å¯ä»¥ç‹¬ç«‹ä½¿ç”¨
- [ ] Vite Plugin å¯ä»¥ç‹¬ç«‹ä½¿ç”¨

### æ€§èƒ½éªŒæ”¶

- [ ] CLI åŒ…ä½“ç§¯ < 2MB
- [ ] Runtime åŒ…ä½“ç§¯ < 100KB
- [ ] å®‰è£…æ—¶é—´ < 30s

### å…¼å®¹æ€§éªŒæ”¶

- [ ] å‘åå…¼å®¹ï¼ˆå¦‚æœå¯èƒ½ï¼‰
- [ ] è¿ç§»æŒ‡å—å®Œæ•´
- [ ] æ–‡æ¡£æ›´æ–°

---

## ğŸ”— ç›¸å…³èµ„æº

- [ExcelJS æ–‡æ¡£](https://github.com/exceljs/exceljs)
- [Commander.js æ’ä»¶ç³»ç»Ÿ](https://github.com/tj/commander.js)
- [Node.js æ’ä»¶æœºåˆ¶](https://nodejs.org/api/modules.html)

---

## ğŸ¯ å®æ–½ä¼˜å…ˆçº§å’Œæ—¶é—´çº¿

### æ—¶é—´çº¿æ€»è§ˆ

```
Week 1-2:  é˜¶æ®µé›¶ - å‰ç½®é—®é¢˜ä¿®å¤ï¼ˆğŸ”´ P0 - å¿…é¡»ï¼‰
Week 3-4:  é˜¶æ®µä¸€ - æ¶æ„è§£è€¦ï¼ˆğŸŸ¡ P1 - é‡è¦ï¼‰
Week 5-6:  é˜¶æ®µäºŒ - åŠŸèƒ½å®ç°ï¼ˆğŸŸ¡ P1 - é‡è¦ï¼‰
Week 7-8:  é˜¶æ®µä¸‰ - æ’ä»¶ç³»ç»Ÿï¼ˆğŸŸ¢ P2 - æ¬¡è¦ï¼‰
Week 9-10: é˜¶æ®µå›› - æµ‹è¯•ä¼˜åŒ–ï¼ˆğŸŸ¢ P2 - æ¬¡è¦ï¼‰
```

### å…³é”®é‡Œç¨‹ç¢‘

- **M1ï¼ˆWeek 2ç»“æŸï¼‰**ï¼šæ‰€æœ‰å‰ç½®é—®é¢˜ä¿®å¤å®Œæˆï¼Œé¡¹ç›®å¯ä»¥æ­£å¸¸æ„å»ºå’Œå¼€å‘
- **M2ï¼ˆWeek 4ç»“æŸï¼‰**ï¼šåŒ…å®Œå…¨è§£è€¦ï¼Œå¯ä»¥ç‹¬ç«‹å®‰è£…ä½¿ç”¨
- **M3ï¼ˆWeek 6ç»“æŸï¼‰**ï¼šExcelå·¥ä½œæµå®Œæ•´å¯ç”¨
- **M4ï¼ˆWeek 8ç»“æŸï¼‰**ï¼šæ’ä»¶ç³»ç»Ÿå¯ç”¨ï¼ŒVikaæ’ä»¶å¯é€‰
- **M5ï¼ˆWeek 10ç»“æŸï¼‰**ï¼šæµ‹è¯•å®Œå–„ï¼Œæ–‡æ¡£æ›´æ–°ï¼Œå¯ä»¥å‘å¸ƒv1.0

### é£é™©æç¤º

âš ï¸ **é‡è¦**ï¼šé˜¶æ®µé›¶çš„æ‰€æœ‰ä»»åŠ¡å¿…é¡»100%å®Œæˆï¼Œæ‰èƒ½è¿›å…¥é˜¶æ®µä¸€ã€‚  
âš ï¸ **æ³¨æ„**ï¼šå¦‚æœé˜¶æ®µé›¶æœªå®Œæˆï¼Œåç»­é˜¶æ®µä¼šé‡åˆ°å„ç§æ„å»ºå’Œç±»å‹é—®é¢˜ã€‚

---

**æ–¹æ¡ˆå®Œæˆæ—¶é—´**: 2026-01-03  
**é¢„è®¡å®æ–½æ—¶é—´**: 10å‘¨  
**ä¼˜å…ˆçº§**ï¼šé˜¶æ®µé›¶ä¸ºP0ï¼ˆå¿…é¡»ç«‹å³å¼€å§‹ï¼‰ï¼Œå…¶ä»–æŒ‰é˜¶æ®µæ‰§è¡Œ
